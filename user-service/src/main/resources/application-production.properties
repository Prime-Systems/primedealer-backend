# =============================================================== #
# =      SPRING BOOT CONFIGURATION FOR PRODUCTION PROFILE       = #
# =============================================================== #

# --- Application Settings ---
# Explicitly set the application name for consistency.
spring.application.name=user-service

# --- Server Configuration ---
# Use the PORT environment variable provided by Render, defaulting to 8081.
server.port=${PORT:8081}
server.shutdown=graceful

# --- Database Configuration ---
# This is the key fix: Prepend "jdbc:" to the DATABASE_URL from Render.
spring.datasource.url=jdbc:${DATABASE_URL}
# No username/password needed here; they are part of the DATABASE_URL.
spring.datasource.driver-class-name=org.postgresql.Driver

# --- JPA & Hibernate Settings for Production ---
# Set ddl-auto to "validate" in production when using Flyway.
# This ensures the schema matches the entities without Hibernate trying to change it.
# Using "update" or "create" is risky in production.
spring.jpa.hibernate.ddl-auto=validate

# Disable showing SQL in logs for production to reduce noise and improve performance.
spring.jpa.show-sql=false

# Recommended setting to avoid performance issues.
spring.jpa.open-in-view=false

# --- Flyway Migration ---
# Ensure Flyway is enabled to manage database schema changes.
spring.flyway.enabled=true

# --- Security & JWT Configuration ---
# Use the secure secret key generated and provided by the Render environment.
application.security.jwt.secret-key=${JWT_SECRET_KEY}
# 24-hour token expiration.
application.security.jwt.expiration=86400000